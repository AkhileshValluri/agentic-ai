- `LlmAgent`, Workflow agents (`LoopAgent`, `SequentialAgent`, ...) inherit from this function and override
## Attributes
  1. name: str # Unique within the agent tree
  2. description: str # The model uses this to determine whether to delegate control to the agent
  3. parent_agent: Optional[BaseAgent] # Agent can only be added as sub-agent once
  4. sub_agents: list[BaseAgent] # Sub-agents which this agent chooses to delegate control to
  5. before_agent_callback: Optional[BeforeAgentCallback]
  6. after_agent_callback: Optional[AfterAgentCallback]
  `BeforeAgentCallback, AfterAgentCallback are lists of (or single) function(s) which return "types.Content" or awaitable to it`

## Methods
  1. clone() # exists because same instance can't be sub-agent multiple times
  2. 
  ```python
  async def run_async(
      self,
      parent_context: InvocationContext,
  ) -> AsyncGenerator[Event, None]:
    """Entry method to run an agent via text-based conversation.

    Args:
      parent_context: InvocationContext, the invocation context of the parent
        agent.

    Yields:
      Event: the events generated by the agent.
    """

    async def _run_with_trace() -> AsyncGenerator[Event, None]:
      with tracer.start_as_current_span(f'agent_run [{self.name}]'):
        ctx = self._create_invocation_context(parent_context)

        if event := await self.__handle_before_agent_callback(ctx):
          yield event
        if ctx.end_invocation:
          return

        async with Aclosing(self._run_async_impl(ctx)) as agen: # _run_async_impl is what is overridden in agent types
          async for event in agen:
            yield event

        if ctx.end_invocation:
          return

        if event := await self.__handle_after_agent_callback(ctx):
          yield event

    async with Aclosing(_run_with_trace()) as agen:
      async for event in agen:
        yield event
  ```
  3. from_config() # factory to create from BaseAgentConfig

## Example
```python
code_refactorer_agent = LlmAgent(
    name="CodeRefactorerAgent",
    model=GEMINI_MODEL,
    # Change 3: Improved instruction, correctly using state key injection
    instruction="""You are a Python Code Refactoring AI.
      Your goal is to improve the given Python code based on the provided review comments.

      **Original Code:**
      ```python
      {generated_code}
      ```

      **Review Comments:**
      {review_comments}

      **Task:**
      Carefully apply the suggestions from the review comments to refactor the original code.
      If the review comments state "No major issues found," return the original code unchanged.
      Ensure the final code is complete, functional, and includes necessary imports and docstrings.

      **Output:**
      Output *only* the final, refactored Python code block, enclosed in triple backticks (```python ... ```). 
      Do not add any other text before or after the code block.
    """,
    description="Refactors code based on review comments.",
    output_key="refactored_code", # Stores output in state['refactored_code']
)
```